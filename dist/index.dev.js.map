{"version":3,"sources":["index.js"],"names":["mysql","require","express","exphbs","session","bodyParser","path","response","request","config","connection","createConnection","host","user","password","database","connect","err","console","log","app","port","process","env","PORT","set","use","secret","resave","saveUninitialized","urlencoded","extended","json","get","req","res","render","post","username","body","query","error","results","fields","length","loggedin","redirect","send","end","username1","password1","listen"],"mappings":"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","sourcesContent":["//including node_module packages in this file\r\nvar mysql = require('mysql');\r\nvar express = require('express');\r\nconst exphbs = require('express-handlebars');\r\nvar session = require('express-session');\r\nvar bodyParser = require('body-parser');\r\nvar path = require('path');\r\nconst  response  = require('express');\r\nconst { request } = require('http');\r\n\r\nrequire('dotenv').config();\r\n\r\n//connecting mysql database\r\nvar connection = mysql.createConnection({\r\n    host    : 'localhost',\r\n    user    : 'root',\r\n    password: \"MohammedAimon@41\",\r\n    database: 'stock-ease'\r\n});\r\n\r\n\r\n\r\nconnection.connect((err)=>{\r\n    if(err) throw err;\r\n    console.log(\"connected\")\r\n\r\n});\r\n\r\n//initialize express and port\r\nvar app = express();\r\nconst port = process.env.PORT || 5000;\r\n\r\n//setting up ejs\r\napp.set(\"view-engine\",\"ejs\");\r\n//using some of Express packages\r\napp.use(session({\r\n    secret: 'secret',\r\n    resave: true,\r\n    saveUninitialized: true\r\n}));\r\n\r\napp.use(bodyParser.urlencoded({extended : true}));\r\napp.use(bodyParser.json());\r\n\r\napp.use(express.static('views'));\r\napp.use(express.static('styles'));\r\napp.use(express.static('assets'));\r\n\r\napp.set('views', './views')\r\napp.set('view engine', 'ejs')\r\n\r\napp.get('', (req, res)=> {\r\n    res.render('home');\r\n})\r\n\r\napp.get('/home', (req,res)=> {\r\n    res.render('home');\r\n})\r\n\r\napp.get('/login', (req, res)=> {\r\n    res.render('login');\r\n});\r\napp.get('/register', (req, res)=> {\r\n    res.render('register');\r\n});\r\n\r\napp.get('/homeadmin', (req,res)=> {\r\n    res.render('homeadmin');\r\n});\r\napp.get('/homemanager', (req,res)=> {\r\n    res.render('homemanager');\r\n});\r\n\r\n//handling post request\r\napp.post('/auth', function(request, response) {\r\n    var username = request.body.username;\r\n    var password = request.body.password;\r\n    if (username && password) {\r\n        connection.query('select * from manager where username = ? and password = ?', [username, password], function(error, results, fields) {\r\n            if(results.length > 0) {\r\n                request.session.loggedin = true;\r\n                request.session.username = username;\r\n                response.redirect('homemanager');\r\n            } else {\r\n                response.send('Incorrect Username and/or Password!');\r\n            }\r\n            response.end();\r\n        });\r\n    } else {\r\n        response.send('Please enter a Username and Password!');\r\n        response.end();\r\n    }\r\n});\r\napp.post('/auth1', (req,res)=> {\r\n    var username = req.body.username1;\r\n    var password = req.body.password1;\r\n    if(username && password) {\r\n        connection.query('select * from admin where username = ? and password = ?', [username, password], (error, results, fields) =>{\r\n            if(results.length > 0) {\r\n                req.session.loggedin = true;\r\n                req.session.username = username;\r\n                res.redirect('homeadmin');\r\n            } else {\r\n                res.send('Incorrect Username and/or Password!');\r\n            }\r\n            res.end();\r\n        });\r\n    }   else {\r\n            res.send('Please enter a Username and Password!');\r\n            res.end();\r\n    }\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\napp.listen(port, ()=> console.log(`Listening on port ${port}`));"],"file":"index.dev.js"}